<template>
    <div id="mapbg" class="mapbg">
        <div id="map">
        </div>
    </div>
</template>

<script>
import {Globe} from '@/helpers/map/Globe.js';

export default {
  methods: {
    init() {
      const newData = [
        { lat: 69.59999999999997, lng: 136.20000000000027, label: 'test' },
        { lat: 64.49999999999996, lng: -125.59999999999991, label: '' },
        { lat: 64.49999999999996, lng: 95.4000000000002, label: '' },
        { lat: 62.799999999999955, lng: -47.399999999999814, label: '' },
        { lat: 61.09999999999995, lng: 139.60000000000028, label: '' },
        { lat: 40.69999999999992, lng: 119.20000000000024, label: '' },
        { lat: 32.1999999999999, lng: 13.800000000000175, label: '' },
        { lat: 32.1999999999999, lng: 88.6000000000002, label: '' },
        { lat: 25.399999999999906, lng: 7.000000000000174, label: '' },
        { lat: 10.099999999999913, lng: 10.400000000000174, label: '' },
        { lat: 8.399999999999913, lng: -3.1999999999998257, label: '' },
        { lat: 8.399999999999913, lng: 3.600000000000174, label: '' },
        { lat: -0.10000000000008713, lng: 102.20000000000022, label: '' },
        { lat: -6.900000000000087, lng: 37.600000000000165, label: '' },
        { lat: -12.000000000000085, lng: 20.600000000000172, label: '' },
        { lat: -27.30000000000008, lng: 20.600000000000172, label: '' },
        { lat: -27.30000000000008, lng: 30.800000000000168, label: '' },
        { lat: 60.24999999999996, lng: 15.500000000000158, label: '' },
        { lat: 58.549999999999955, lng: -127.29999999999993, label: '' },
        { lat: 58.549999999999955, lng: 93.70000000000019, label: '' },
        { lat: 56.84999999999995, lng: 90.30000000000018, label: '' },
        { lat: 50.04999999999994, lng: -106.89999999999989, label: '' },
        { lat: 48.34999999999994, lng: -66.09999999999982, label: '' },
        { lat: 46.649999999999935, lng: 90.30000000000018, label: '' },
        { lat: 44.94999999999993, lng: -79.69999999999985, label: '' },
        { lat: 39.84999999999992, lng: 117.50000000000023, label: '' },
        { lat: 34.749999999999915, lng: -120.49999999999991, label: '' },
        { lat: 34.749999999999915, lng: -1.4999999999998423, label: '' },
        { lat: 16.04999999999992, lng: 80.10000000000016, label: '' },
        { lat: -6.050000000000079, lng: -62.699999999999825, label: '' },
        { lat: -26.450000000000074, lng: 124.30000000000024, label: '' },
        { lat: -26.450000000000074, lng: 151.50000000000028, label: '' },
        { lat: -33.25000000000007, lng: -69.49999999999983, label: '' },
        { lat: -45.15000000000009, lng: 168.5000000000003, label: '' },
        { lat: 79.79999999999998, lng: -26.999999999999822, label: '' },
        { lat: 74.69999999999997, lng: 98.80000000000021, label: '' },
        { lat: 72.99999999999997, lng: -122.1999999999999, label: '' },
        { lat: 64.49999999999996, lng: -122.1999999999999, label: '' },
        { lat: 50.899999999999935, lng: -98.39999999999986, label: '' },
        { lat: 49.19999999999993, lng: 119.20000000000024, label: '' },
        { lat: 47.49999999999993, lng: 27.40000000000017, label: '' },
        { lat: 44.09999999999992, lng: -115.39999999999989, label: '' },
        { lat: 32.1999999999999, lng: 54.60000000000016, label: '' },
        { lat: 30.499999999999904, lng: -94.99999999999986, label: '' },
        { lat: 28.799999999999905, lng: 119.20000000000024, label: '' },
        { lat: 21.999999999999908, lng: 10.400000000000174, label: '' },
        { lat: 18.59999999999991, lng: -71.19999999999982, label: '' },
        { lat: 15.19999999999991, lng: -3.1999999999998257, label: '' },
        { lat: 13.499999999999911, lng: 105.60000000000022, label: '' },
        { lat: 8.399999999999913, lng: -71.19999999999982, label: '' },
        { lat: -0.10000000000008713, lng: -54.19999999999981, label: '' },
        { lat: -13.700000000000085, lng: -64.3999999999998, label: '' },
        { lat: -13.700000000000085, lng: 30.800000000000168, label: '' },
        { lat: -18.800000000000082, lng: 47.80000000000016, label: '' },
        { lat: -22.20000000000008, lng: 27.40000000000017, label: '' },
        { lat: 72.14999999999998, lng: 52.90000000000015, label: '' },
        { lat: 68.74999999999997, lng: -103.49999999999989, label: '' },
        { lat: 58.549999999999955, lng: 52.90000000000015, label: '' },
        { lat: 56.84999999999995, lng: -62.699999999999825, label: '' },
        { lat: 50.04999999999994, lng: 25.700000000000156, label: '' },
        { lat: 46.649999999999935, lng: 22.300000000000157, label: '' },
        { lat: 46.649999999999935, lng: 83.50000000000017, label: '' },
        { lat: 36.44999999999992, lng: -96.69999999999987, label: '' },
        { lat: 33.04999999999991, lng: 117.50000000000023, label: '' },
        { lat: 27.949999999999914, lng: 103.9000000000002, label: '' },
        { lat: 19.449999999999918, lng: -89.89999999999986, label: '' },
        { lat: 19.449999999999918, lng: 42.70000000000015, label: '' },
        { lat: 5.8499999999999215, lng: -69.49999999999983, label: '' },
        { lat: -14.550000000000077, lng: -59.29999999999983, label: '' },
        { lat: -19.650000000000077, lng: 124.30000000000024, label: '' },
        { lat: -89.35000000000016, lng: -35.49999999999984, label: '' },

        { lat: 42.35843, lng: -71.05977, label: 'Boston' },
        { lat: 25.77427, lng: -80.19366, label: 'Miami' },
        { lat: 37.77493, lng: -122.41942, label: 'San Francisco' },
        { lat: -23.5475, lng: -46.63611, label: 'Sao Paulo' },
        { lat: -12.04318, lng: -77.02824, label: 'Lima' },
        { lat: 21.30694, lng: -157.85833, label: 'Honolulu' },
        { lat: -31.95224, lng: 115.8614, label: 'Perth' },
        { lat: -33.86785, lng: 151.20732, label: 'Sydney' },
        { lat: -42, lng: 174, label: 'New Zealand' },
        { lat: 22.28552, lng: 114.15769, label: 'Hong Kong' },
        { lat: 19.07283, lng: 72.88261, label: 'Mumbai' },
        { lat: 30.06263, lng: 31.24967, label: 'Cairo' },
        { lat: -33.92584, lng: 18.42322, label: 'Cape Town' },
        { lat: 52.52437, lng: 13.41053, label: 'Berlin' },
        { lat: 55.95206, lng: -3.19648, label: 'Edinburgh' },
        { lat: 55.75222, lng: 37.61556, label: 'Moscow' },
      ];

      const grid = {
        tiles: [
          {
            lat: -31.72,
            lon: 90,
            b: [
              { x: 0, y: 265.52, z: 423.63 },
              { x: -3, y: 263.67, z: 424.77 },
              { x: -1.85, y: 260.67, z: 426.62 },
              { x: 1.85, y: 260.67, z: 426.62 },
              { x: 3, y: 263.67, z: 424.77 },
            ],
          },
          {
            lat: -31.72,
            lon: -90,
            b: [
              { x: 0, y: 265.52, z: -423.63 },
              { x: -3, y: 263.67, z: -424.77 },
              { x: -1.85, y: 260.67, z: -426.62 },
              { x: 1.85, y: 260.67, z: -426.62 },
              { x: 3, y: 263.67, z: -424.77 },
            ],
          },
          {
            lat: 0,
            lon: 31.72,
            b: [
              { x: -424.77, y: 3, z: 263.67 },
              { x: -423.63, y: 0, z: 265.52 },
              { x: -424.77, y: -3, z: 263.67 },
              { x: -426.62, y: -1.85, z: 260.67 },
              { x: -426.62, y: 1.85, z: 260.67 },
            ],
          },
          {
            lat: -62.88,
            lon: -180,
            b: [
              { x: 228.77, y: 444.58, z: 0.55 },
              { x: 228.06, y: 444.94, z: 1.1 },
              { x: 227.17, y: 445.4, z: 0.55 },
              { x: 227.17, y: 445.4, z: -0.55 },
              { x: 228.06, y: 444.94, z: -1.1 },
              { x: 228.77, y: 444.58, z: -0.55 },
            ],
          },
          {
            lat: -64.51,
            lon: -180,
            b: [
              { x: 215.77, y: 451.03, z: 0.36 },
              { x: 215.28, y: 451.27, z: 0.73 },
              { x: 214.67, y: 451.56, z: 0.37 },
              { x: 214.67, y: 451.56, z: -0.37 },
              { x: 215.28, y: 451.27, z: -0.73 },
              { x: 215.77, y: 451.03, z: -0.36 },
            ],
          },
          {
            lat: -66.18,
            lon: -180,
            b: [
              { x: 204.78, y: 456.08, z: 1.72 },
              { x: 202.38, y: 457.15, z: 3.46 },
              { x: 199.45, y: 458.44, z: 1.74 },
              { x: 199.45, y: 458.44, z: -1.74 },
              { x: 202.38, y: 457.15, z: -3.46 },
              { x: 204.78, y: 456.08, z: -1.72 },
            ],
          },
          {
            lat: -67.9,
            lon: -180,
            b: [
              { x: 191.52, y: 461.8, z: 1.99 },
              { x: 188.64, y: 462.97, z: 4.01 },
              { x: 185.19, y: 464.38, z: 2.02 },
              { x: 185.19, y: 464.38, z: -2.02 },
              { x: 188.64, y: 462.97, z: -4.01 },
              { x: 191.52, y: 461.8, z: -1.99 },
            ],
          },
          {
            lat: -71.45,
            lon: -180,
            b: [
              { x: 159.87, y: 473.73, z: 0.47 },
              { x: 159.14, y: 473.98, z: 0.95 },
              { x: 158.29, y: 474.26, z: 0.48 },
              { x: 158.29, y: 474.26, z: -0.48 },
              { x: 159.14, y: 473.98, z: -0.95 },
              { x: 159.87, y: 473.73, z: -0.47 },
            ],
          },
          {
            lat: -59.87,
            lon: 164.91,
            b: [
              { x: 242.04, y: 432.94, z: 62.76 },
              { x: 240.36, y: 433.67, z: 64.19 },
              { x: 240.6, y: 433.14, z: 66.8 },
              { x: 242.67, y: 431.86, z: 67.59 },
              { x: 244.48, y: 431.12, z: 65.76 },
              { x: 244.08, y: 431.68, z: 63.55 },
            ],
          },
          {
            lat: -59.98,
            lon: 161.49,
            b: [
              { x: 237.12, y: 433.16, z: 78.29 },
              { x: 236.37, y: 433.45, z: 78.92 },
              { x: 236.46, y: 433.2, z: 80.06 },
              { x: 237.36, y: 432.64, z: 80.41 },
              { x: 238.17, y: 432.34, z: 79.61 },
              { x: 238.01, y: 432.61, z: 78.63 },
            ],
          },
          {
            lat: -59.92,
            lon: 154.39,
            b: [
              { x: 225.82, y: 433.42, z: 105.37 },
              { x: 223.74, y: 434.08, z: 107.11 },
              { x: 223.88, y: 433.25, z: 110.11 },
              { x: 226.27, y: 431.78, z: 111.02 },
              { x: 228.48, y: 431.15, z: 108.92 },
              { x: 228.18, y: 431.97, z: 106.27 },
            ],
          },
          {
            lat: -59.74,
            lon: 150.75,
            b: [
              { x: 219.67, y: 432.98, z: 119.21 },
              { x: 216.85, y: 433.76, z: 121.54 },
              { x: 216.99, y: 432.56, z: 125.5 },
              { x: 220.15, y: 430.61, z: 126.71 },
              { x: 223.14, y: 429.87, z: 123.94 },
              { x: 222.8, y: 431.05, z: 120.4 },
            ],
          },
          {
            lat: -59.45,
            lon: 147.09,
            b: [
              { x: 213.24, y: 431.78, z: 134.29 },
              { x: 210.43, y: 432.44, z: 136.58 },
              { x: 210.51, y: 431.18, z: 140.4 },
              { x: 213.58, y: 429.28, z: 141.57 },
              { x: 216.54, y: 428.67, z: 138.92 },
              { x: 216.28, y: 429.9, z: 135.45 },
            ],
          },
          {
            lat: -59.05,
            lon: 143.44,
            b: [
              { x: 206.48, y: 429.63, z: 150.82 },
              { x: 204.7, y: 429.98, z: 152.25 },
              { x: 204.72, y: 429.13, z: 154.59 },
              { x: 206.62, y: 427.96, z: 155.32 },
              { x: 208.48, y: 427.64, z: 153.69 },
              { x: 208.36, y: 428.46, z: 151.54 },
            ],
          },
          { lat: -58.55, lon: 139.83 },
        ],
      };

      const globe = new Globe(1920, 1080, {
        data: newData, // copy the data array
        tiles: grid.tiles,
        baseColor: '#cd5c5c',
        markerColor: '#cd5c5c',
        pinColor: '#cd5c5c',
        satelliteColor: '#cd5c5c',
        scale: 1,
        dayLength: 1000+500,
        introLinesDuration: 2000,
        maxPins: 100,
        maxMarkers: 100,
        viewAngle: 1,
      });
      console.log(globe);
      // globe = new ENCOM.Globe(window.innerWidth, window.innerHeight, {
      //     font: "Inconsolata",
      //     data: newData, // copy the data array
      //     tiles: grid.tiles,
      //     baseColor: $("#globe-color").val(),
      //     markerColor: $("#marker-color").val(),
      //     pinColor: $("#pin-color").val(),
      //     satelliteColor: $("#satellite-color").val(),
      //     scale: parseFloat($("#globe-scale").val()),
      //     dayLength: 1000 * parseFloat($("#globe-spr").val()),
      //     introLinesDuration: parseFloat($("#globe-id").val()),
      //     maxPins: parseFloat($("#globe-mp").val()),
      //     maxMarkers: parseFloat($("#globe-mm").val()),
      //     viewAngle: parseFloat($("#globe-va").val())
      // });

      // $("#globe").append(globe.domElement);

      const mapbg = document.getElementById('mapbg');
      mapbg.append(globe.domElement);
      // globe.init();
      
      setTimeout(() => {
        globe.init();
              globe.tick()
      }, 500);
    },
  },
  mounted() {
    setTimeout(() => {
      this.init();
    }, 500);
  },
};
</script>

<style scoped lang="less">
.mapbg {
  position: relative;
}

#map {
  height: 100%;
}

img {
  display: none;
}
</style>
